{"remainingRequest":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\vue_server_system\\src\\router\\index.js","dependencies":[{"path":"D:\\vue_workspace\\vue_server_system\\src\\router\\index.js","mtime":1682316734160},{"path":"D:\\vue_workspace\\vue_server_system\\babel.config.js","mtime":1679550448295},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IExvZ2luIGZyb20gIkAvdmlld3MvTG9naW4iOwppbXBvcnQgTm90Rm91bmQgZnJvbSAiQC92aWV3cy9Ob3RGb3VuZCI7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKVnVlLnVzZShWdWVSb3V0ZXIpOwpjb25zdCByb3V0ZXMgPSBbewogIG5hbWU6ICdIb21lJywKICBwYXRoOiAnLycsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ0Avdmlld3MvSW5kZXgudnVlJyksCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAnL3NldHB3ZCcsCiAgICBuYW1lOiAnU2V0UHdkJywKICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL1NldFB3ZCcpLAogICAgbWV0YTogewogICAgICBpY29uOiAnZWwtaWNvbi1wYXBlcmNsaXAnLAogICAgICB0aXRsZTogJ+S/ruaUueWvhueggScKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnL215dXNlcicsCiAgICBuYW1lOiAnTXlVc2VyJywKICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL3N5c3RlbS9NeVVzZXInKSwKICAgIG1ldGE6IHsKICAgICAgaWNvbjogJ2VsLWljb24tdXNlcicsCiAgICAgIHRpdGxlOiAn5Liq5Lq65Lit5b+DJwogICAgfQogIH0KICAvLyB7CiAgLy8gICAgIG5hbWU6ICdJbmRleCcsCiAgLy8gICAgIHBhdGg6ICcvaW5kZXgnLAogIC8vICAgICAvLyBjb21wb25lbnQ6IEluZGV4LAogIC8vICAgICAvLyDnm7TmjqXliqjmgIHlr7zlhaUgSW5kZXgudnVlCiAgLy8gICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL0luZGV4LnZ1ZScpLAogIC8vIH0sCiAgLy8KICAvLyB7CiAgLy8gICAgIHBhdGg6ICcvc3lzdGVtL3VzZXInLAogIC8vICAgICBuYW1lOiAnVXNlcicsCiAgLy8gICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL3N5c3RlbS9Vc2VyLnZ1ZScpLCAvL+WKqOaAgeWvvOWFpQogIC8vIH0sCiAgLy8gewogIC8vICAgICBwYXRoOiAnL3N5c3RlbS9yb2xlcycsCiAgLy8gICAgIG5hbWU6ICdSb2xlcycsCiAgLy8gICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL3N5c3RlbS9Sb2xlcy52dWUnKSwgLy/liqjmgIHlr7zlhaUKICAvLyB9LAogIC8vIHsKICAvLyAgICAgcGF0aDogJy9zeXN0ZW0vbWVudScsCiAgLy8gICAgIG5hbWU6ICdNZW51JywKICAvLyAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ0Avdmlld3Mvc3lzdGVtL01lbnUudnVlJyksIC8v5Yqo5oCB5a+85YWlCiAgLy8gfSwKICBdCn0sIHsKICBuYW1lOiAnSW5kZXgnLAogIHBhdGg6ICcvaW5kZXgnLAogIC8vIGNvbXBvbmVudDogSW5kZXgsCiAgLy8g55u05o6l5Yqo5oCB5a+85YWlIEluZGV4LnZ1ZQogIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCdAL3ZpZXdzL0luZGV4LnZ1ZScpCn0sIHsKICBuYW1lOiAnTG9naW4nLAogIHBhdGg6ICcvbG9naW4nLAogIGNvbXBvbmVudDogTG9naW4KfSwgewogIG5hbWU6ICdOb3RGb3VuZCcsCiAgcGF0aDogJy9ub3Rmb3VuZCcsCiAgY29tcG9uZW50OiBOb3RGb3VuZAp9LCB7CiAgbmFtZTogJ0RlcHQnLAogIHBhdGg6ICcvZGVwdCcsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ0Avdmlld3MvRGVwdC52dWUnKQp9XTsKY29uc3Qgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgcm91dGVzCn0pOwoKLy/lrprkuYnot6/nlLHlrojljavvvIzkvb/nlKhheGlvc+ivt+axgu+8jOW5tuWKqOaAgemFjee9rui3r+eUsQpyb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICAvL+ivu+WPlnZ1ZXjkuK1tb2R1bGVz5LitbWVudeWCqOWtmOeahGhhc3JvdXRl5Y+Y6YePCiAgbGV0IGhhc1JvdXRlID0gc3RvcmUuc3RhdGUubWVudS5oYXNSb3V0ZTsKICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsgLy/nmbvpmYbov4fliJnmnInlgLwKICBpZiAodG8ucGF0aCA9PSAnL2xvZ2luJykgewogICAgbmV4dCgpOwogIH0gZWxzZSBpZiAoIXRva2VuKSB7CiAgICBuZXh0KHsKICAgICAgcGF0aDogJy9sb2dpbicKICAgIH0pOwogIH0gZWxzZSBpZiAodG8ucGF0aCA9PSAnLycgfHwgdG8ucGF0aCA9PSAnJykgewogICAgbmV4dCh7CiAgICAgIHBhdGg6ICcvaW5kZXgnCiAgICB9KTsKICB9IGVsc2UgaWYgKCFoYXNSb3V0ZSkgewogICAgbGV0IHJvdXRlcyA9IHJvdXRlci5vcHRpb25zLnJvdXRlczsKICAgIC8v5Yqg6L296I+c5Y2VCiAgICBheGlvcy5nZXQoJy9tZW51L25hdicsIHsKICAgICAgLy/nu5lheGlvc+WvueixoeWKoOS4iuivt+axguWktO+8jOWMheWQq3Rva2VuCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykKICAgICAgfQogICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8v6I635b6X5pyN5Yqh5Zmo6I+c5Y2V5pWw5o2u5bm25a2Y5YKo5YiwdnVleOWtkOaooeWdlwogICAgICBzdG9yZS5jb21taXQoJ3NldE1lbnVMaXN0JywgcmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhLm5hdik7CiAgICAgIHN0b3JlLmNvbW1pdCgnc2V0UGVybUxpc3QnLCByZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEuYXV0aG9yaXR5cyk7CgogICAgICAvL+mFjee9ruWKqOaAgei3r+eUsQogICAgICByZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEubmF2LmZvckVhY2gobWVudSA9PiB7CiAgICAgICAgaWYgKG1lbnUuY2hpbGRyZW4pIHsKICAgICAgICAgIG1lbnUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZE1lbnUgPT4gewogICAgICAgICAgICAvL+iwg+eUqOW5tuaOpeaUtgogICAgICAgICAgICBsZXQgcm91dGUgPSBtZW51VG9Sb3V0ZShjaGlsZE1lbnUpOwogICAgICAgICAgICBpZiAocm91dGUpIHsKICAgICAgICAgICAgICByb3V0ZXNbMF0uY2hpbGRyZW4ucHVzaChyb3V0ZSk7IC8v5bCG6I+c5Y2V5Yqo5oCB5Yib5bu655qE6Lev55Sx5a+56LGh5re75Yqg5Yiw546w5pyJ6YWN572u77yM5Yqg5ZyoL+S4i+S6jOe6p+i3r+eUsQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcm91dGVyLmFkZFJvdXRlcyhyb3V0ZXMpOyAvL+aWsOeahOi3r+eUsemFjee9rueUn+aViAogICAgICBzdG9yZS5jb21taXQoJ2NoYW5nZVJvdXRlU3RhdHVzJywgdHJ1ZSk7IC8v5L+u5pS5bWVudeS4rWhhc1JvdXRl5Li6dHJ1Ze+8jOihqOekuuaJp+ihjAogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiB0by5wYXRoCiAgICAgIH0pOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOwoKLy/oj5zljZXlr7nosaHovazljJbkuLrot6/nlLHlr7nosaEKY29uc3QgbWVudVRvUm91dGUgPSBjaGlsZE1lbnUgPT4gewogIGlmICghY2hpbGRNZW51LmNvbXBvbmVudCkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGxldCByb3V0ZSA9IHsKICAgIG5hbWU6IGNoaWxkTWVudS5uYW1lLAogICAgcGF0aDogY2hpbGRNZW51LnBhdGgsCiAgICBtZXRhOiB7CiAgICAgIGljb246IGNoaWxkTWVudS5pY29uLAogICAgICB0aXRsZTogY2hpbGRNZW51LnRpdGxlCiAgICB9CiAgfTsKICByb3V0ZS5jb21wb25lbnQgPSAoKSA9PiBpbXBvcnQoJ0Avdmlld3MvJyArIGNoaWxkTWVudS5jb21wb25lbnQgKyAnLnZ1ZScpOwogIHJldHVybiByb3V0ZTsKfTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"names":["Vue","VueRouter","Login","NotFound","store","axios","use","routes","name","path","component","children","meta","icon","title","router","beforeEach","to","from","next","hasRoute","state","menu","token","localStorage","getItem","options","get","headers","then","response","commit","data","resultdata","nav","authoritys","forEach","childMenu","route","menuToRoute","push","addRoutes"],"sources":["D:/vue_workspace/vue_server_system/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport Login from \"@/views/Login\";\nimport NotFound from \"@/views/NotFound\";\n\nimport store from '@/store'\nimport axios from \"axios\";\n\nVue.use(VueRouter)\n\nconst routes = [\n    {\n        name: 'Home',\n        path: '/',\n        component: () => import('@/views/Index.vue'),\n        children: [\n            {\n                path: '/setpwd',\n                name:'SetPwd',\n                component:()=>import('@/views/SetPwd'),\n                meta:{\n                    icon:'el-icon-paperclip',\n                    title: '修改密码',\n                }\n            },\n            {\n                path: '/myuser',\n                name:'MyUser',\n                component:()=>import('@/views/system/MyUser'),\n                meta:{\n                    icon:'el-icon-user',\n                    title: '个人中心',\n                }\n            },\n            // {\n            //     name: 'Index',\n            //     path: '/index',\n            //     // component: Index,\n            //     // 直接动态导入 Index.vue\n            //     component: () => import('@/views/Index.vue'),\n            // },\n            //\n            // {\n            //     path: '/system/user',\n            //     name: 'User',\n            //     component: () => import('@/views/system/User.vue'), //动态导入\n            // },\n            // {\n            //     path: '/system/roles',\n            //     name: 'Roles',\n            //     component: () => import('@/views/system/Roles.vue'), //动态导入\n            // },\n            // {\n            //     path: '/system/menu',\n            //     name: 'Menu',\n            //     component: () => import('@/views/system/Menu.vue'), //动态导入\n            // },\n        ],\n    },\n    {\n        name: 'Index',\n        path: '/index',\n        // component: Index,\n        // 直接动态导入 Index.vue\n        component: () => import('@/views/Index.vue'),\n    },\n    {\n        name: 'Login',\n        path: '/login',\n        component: Login,\n    },\n    {\n        name: 'NotFound',\n        path: '/notfound',\n        component: NotFound,\n    },\n    {\n        name:'Dept',\n        path: '/dept',\n        component: () => import('@/views/Dept.vue'),\n    }\n\n]\n\n\n\n\nconst router = new VueRouter({\n    routes,\n})\n\n//定义路由守卫，使用axios请求，并动态配置路由\nrouter.beforeEach((to,from,next)=>{\n    //读取vuex中modules中menu储存的hasroute变量\n    let hasRoute=store.state.menu.hasRoute\n    let token=localStorage.getItem('token')//登陆过则有值\n    if (to.path=='/login'){\n        next()\n    }else if(!token){\n        next({path:'/login'})\n    }else if (to.path=='/'||to.path==''){\n        next({path:'/index'})\n    }else if(!hasRoute){\n        let routes =router.options.routes\n        //加载菜单\n        axios.get('/menu/nav',{\n            //给axios对象加上请求头，包含token\n            headers:{\n                token:localStorage.getItem('token'),\n            },\n        })\n            .then(response=>{\n                //获得服务器菜单数据并存储到vuex子模块\n                store.commit('setMenuList',response.data.resultdata.nav)\n                store.commit('setPermList',response.data.resultdata.authoritys)\n\n                //配置动态路由\n                response.data.resultdata.nav.forEach(menu=>{\n                    if (menu.children){\n                        menu.children.forEach(childMenu=>{\n                            //调用并接收\n                            let route=menuToRoute(childMenu)\n\n                            if (route){\n                                routes[0].children.push(route)//将菜单动态创建的路由对象添加到现有配置，加在/下二级路由\n                            }\n                        })\n                    }\n                })\n                router.addRoutes(routes)//新的路由配置生效\n                store.commit('changeRouteStatus',true)//修改menu中hasRoute为true，表示执行\n                next({path:to.path})\n            })\n    }else {\n        next()\n    }\n})\n\n//菜单对象转化为路由对象\nconst menuToRoute=childMenu=>{\n    if (!childMenu.component){\n        return null\n    }\n\n    let route={\n        name:childMenu.name,\n        path:childMenu.path,\n        meta:{\n            icon:childMenu.icon,\n            title:childMenu.title,\n        },\n    }\n    route.component=()=>import('@/views/'+childMenu.component+'.vue')\n    return route\n}\n\nexport default router\n"],"mappings":"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"}]}