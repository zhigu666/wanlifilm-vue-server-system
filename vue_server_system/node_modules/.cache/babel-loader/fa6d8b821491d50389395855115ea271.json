{"remainingRequest":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js!D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Roles.vue","mtime":1680671141508},{"path":"D:\\vue_workspace\\vue_server_system\\babel.config.js","mtime":1679550448295},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0aW9uOiBbXSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgZGVsZXRlQWxsQnRuU3R1OiB0cnVlLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICBuYW1lOiAnJwogICAgICB9LAogICAgICBSb2xlRm9ybTogewogICAgICAgIC8vIG5hbWU6JycsCiAgICAgICAgLy8gY29kZTonJywKICAgICAgICAvLyByZW1hcms6JycsCiAgICAgICAgLy8gc3RhdHU6MCwKICAgICAgfSwKICAgICAgdG90YWw6IDEwLAogICAgICAvL+WIhumhteaYvuekuuaAu+iusOW9leaVsAogICAgICBzaXplOiAxMCwKICAgICAgLy/ljZXpobXorrDlvZXmlbAKICAgICAgY3VycmVudDogMSwKICAgICAgLy/lvZPliY3pobXnoIEKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6ImyJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLnvJbnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcmVtYXJrOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5o+P6L+wJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHN0YXR1OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi355qE54q25oCBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczoge30sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZFJvbGVMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLnJlc3RGb3JtKCdSb2xlRm9ybScpOwogICAgfSwKICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL3N5c3RlbS9yb2xlLycgKyAodGhpcy5Sb2xlRm9ybS5pZCA/ICd1cGRhdGUnIDogJ3NhdmUnKSwgdGhpcy5Sb2xlRm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkUm9sZUxpc3QoKTsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdEZvcm0oZm9ybU5hbWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc3RGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuUm9sZUZvcm0gPSB7fTsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICAvL+WKoOi9vemhtemdouaJgOacieinkuiJsuS/oeaBrwogICAgLy/lpoLmnpxzZWFyY2hmb3JtLm5hbWXmnInlgLzvvIzku6PooajmsqHmnInovpPlhaXlhoXlrrnvvIzpu5jorqTliqDovb3miYDmnInop5LoibLkv6Hmga8KICAgIGxvYWRSb2xlTGlzdCgpIHsKICAgICAgdGhpcy4kYXhpb3MuZ2V0KCcvc3lzdGVtL3JvbGUvbGlzdCcpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhLnJlY29yZHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0ZGF0YS50b3RhbDsKICAgICAgICB0aGlzLnNpemUgPSByZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEuc2l6ZTsKICAgICAgICB0aGlzLmN1cnJlbnQgPSByZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEuY3VycmVudDsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0aW9uQ2hhbmdlKHZhbHVlKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9uID0gdmFsdWU7CiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbikgewogICAgICAgIC8v5aaC5p6c5pWw5o2u5Lit5pyJ5pWw5o2u77yM5Luj6KGo5pyJ6YCJ5Lit55qE55So5oi377yM5bCx5L+u5pS55om56YeP5Yig6Zmk5Li65Y+v55SoCiAgICAgICAgdGhpcy5kZWxldGVBbGxCdG5TdHUgPSB0aGlzLnNlbGVjdGlvbi5sZW5ndGggPT09IDA7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0Um9sZShpZCkgewogICAgICB0aGlzLiRheGlvcygnL3JvbGUvcm9sZWluZm8vJyArIGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLlJvbGVGb3JtID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhOyAvL+WwhuacjeWKoeWZqOi/lOWbnueahOeUqOaIt+aVsOaNrui1i+WAvOe7mVJvbGVGb3JtCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJvbGUoaWQpIHsKICAgICAgbGV0IGlkcyA9IFtdOyAvL+imgeWIoOmZpOeahOS4gOe7hOaVsOaNrueahGlkCiAgICAgIGlkID8gaWRzLnB1c2goaWQpIDogdGhpcy5zZWxlY3Rpb24uZm9yRWFjaCh1ID0+IHsKICAgICAgICBpZHMucHVzaCh1LmlkKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKGlkcyk7CgogICAgICAvL2lkc+aYr+imgeWIoOmZpOeahGlkCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9zeXN0ZW0vcm9sZS9kZWxldGUnLCBpZHMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRSb2xlTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["data","selection","tableData","deleteAllBtnStu","dialogFormVisible","searchForm","name","RoleForm","total","size","current","rules","required","message","trigger","code","remark","statu","components","props","created","loadRoleList","methods","handleClose","restForm","submitForm","formName","$refs","validate","valid","$axios","post","id","then","response","$message","type","duration","onClose","resetFields","get","resultdata","records","selectionChange","value","length","editRole","deleteRole","ids","push","forEach","u","console","log","showClose"],"sources":["src/views/system/Roles.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"form\" :model=\"searchForm\"  :inline=\"true\">\r\n      <el-form-item>\r\n        <el-input v-model=\"searchForm.name\" placeholder=\"请输入要搜索的角色名\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button @click=\"loadRoleList\">搜索</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible=true\">新建</el-button>\r\n        <el-popconfirm title=\"确认要批量删除角色信息吗？\" @confirm=\"deleteRole\">\r\n          <el-button slot=\"reference\" type=\"danger\" :disabled=\"deleteAllBtnStu\">批量删除</el-button>\r\n        </el-popconfirm>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n<!--    显示角色数据-->\r\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%; margin-bottom:20px;\"\r\n              :cell-style=\"{padding:'2px'}\" @selection-change=\"selectionChange\">\r\n      <el-table-column type=\"selection\" width=\"50\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色名\" width=\"200\" prop=\"name\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色编码\" width=\"150\" prop=\"code\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"描述\" width=\"500\" prop=\"remark\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"状态\" width=\"70\" prop=\"statu\">\r\n        <template slot-scope=\"scope\">\r\n          <!--        <el-tag size=\"mini\" type=\"success\">正常</el-tag>-->\r\n          <el-tag size=\"mini\" v-if=\"scope.row.statu===1\" type=\"success\">正常</el-tag>\r\n          <el-tag size=\"mini\" v-else-if=\"scope.row.statu===0\" type=\"danger\">禁用</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\">分配权限</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <el-button type=\"text\" @click=\"editRole(scope.row.id)\">编辑</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n\r\n\r\n          <el-popconfirm title=\"确认要删除该角色信息吗？\" @confirm=\"deleteRole(scope.row.id)\">\r\n            <el-button slot=\"reference\" type=\"text\">删除</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n    </el-table>\r\n\r\n\r\n    <!--分页页码-->\r\n    <el-pagination layout=\"total,sizes,prev, pager, next,jumper\" :total=\"total\" :page-size=\"size\"\r\n                   :page-sizes=\"[5,10,15,20,25]\" :current-page=\"current\">\r\n    </el-pagination>\r\n\r\n    <!--    新建用户和编辑用户的对话框-->\r\n    <el-dialog title=\"用户信息\" :visible.sync=\"dialogFormVisible\" width=\"600px\" :before-close=\"handleClose\">\r\n      <el-form :model=\"RoleForm\" ref=\"RoleForm\" label-width=\"100px\" :rules=\"rules\">\r\n        <el-form-item label=\"角色名\" label-width=\"100px\" prop=\"name\">\r\n          <el-input v-model=\"RoleForm.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色编码\" label-width=\"100px\" prop=\"code\">\r\n          <el-input v-model=\"RoleForm.code\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" label-width=\"100px\" prop=\"remark\">\r\n          <el-input v-model=\"RoleForm.remark\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\" label-width=\"100px\" prop=\"statu\">\r\n          <el-radio-group v-model=\"RoleForm.statu\">\r\n            <el-radio :label=\"0\">禁用</el-radio>\r\n            <el-radio :label=\"1\">正常</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('RoleForm')\">保存用户</el-button>\r\n          <el-button @click=\"restForm('RoleForm')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      selection:[],\r\n      tableData:[],\r\n      deleteAllBtnStu:true,\r\n      dialogFormVisible:false,\r\n      searchForm:{\r\n        name:'',\r\n      },\r\n\r\n      RoleForm:{\r\n        // name:'',\r\n        // code:'',\r\n        // remark:'',\r\n        // statu:0,\r\n      },\r\n\r\n      total: 10,//分页显示总记录数\r\n      size: 10,//单页记录数\r\n      current: 1,//当前页码\r\n      rules:{\r\n        name:[{required: true, message: '请输入角色', trigger: 'blur'}],\r\n        code:[{required: true, message: '请输入角色编码', trigger: 'blur'}],\r\n        remark:[{required: true, message: '请输入描述', trigger: 'blur'}],\r\n        statu:[{required:true,message:'请输入用户的状态',trigger:'blur'}],\r\n      }\r\n    }\r\n  },\r\n  components: {},\r\n  props: {},\r\n  created() {\r\n    this.loadRoleList()\r\n  },\r\n  methods: {\r\n    handleClose(){\r\n      this.dialogFormVisible = false\r\n      this.restForm('RoleForm')\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.$axios.post('/system/role/' + (this.RoleForm.id ? 'update' : 'save'), this.RoleForm)\r\n              .then(response => {\r\n                this.$message({\r\n                  message: response.data.message,\r\n                  type: \"success\",\r\n                  duration:1500,\r\n                  onClose: () => {\r\n                    this.loadRoleList()\r\n                    this.dialogFormVisible = false\r\n                    this.restForm(formName)\r\n                  }\r\n                })\r\n              })\r\n        }\r\n      })\r\n    },\r\n    restForm(formName){\r\n      this.RoleForm={}\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    //加载页面所有角色信息\r\n    //如果searchform.name有值，代表没有输入内容，默认加载所有角色信息\r\n    loadRoleList(){\r\n      this.$axios.get('/system/role/list').then(response=>{\r\n        this.tableData=response.data.resultdata.records\r\n        this.total=response.data.resultdata.total\r\n        this.size=response.data.resultdata.size\r\n        this.current=response.data.resultdata.current\r\n      })\r\n    },\r\n\r\n    selectionChange(value) {\r\n      this.selection = value;\r\n      if (this.selection) {\r\n        //如果数据中有数据，代表有选中的用户，就修改批量删除为可用\r\n        this.deleteAllBtnStu = (this.selection.length === 0)\r\n      }\r\n    },\r\n    editRole(id){\r\n      this.$axios('/role/roleinfo/' + id).then(response => {\r\n        this.RoleForm = response.data.resultdata //将服务器返回的用户数据赋值给RoleForm\r\n        this.dialogFormVisible = true\r\n      })\r\n    },\r\n    deleteRole(id){\r\n      let ids = [];//要删除的一组数据的id\r\n      id ? ids.push(id) : this.selection.forEach(u => {\r\n        ids.push(u.id)\r\n      })\r\n\r\n      console.log(ids)\r\n\r\n      //ids是要删除的id\r\n      this.$axios.post('/system/role/delete', ids).then(response => {\r\n        this.$message({\r\n          message: response.data.message,\r\n          type: \"success\",\r\n          showClose: true,\r\n          onClose: () => {\r\n            this.loadRoleList()\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"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"}]}