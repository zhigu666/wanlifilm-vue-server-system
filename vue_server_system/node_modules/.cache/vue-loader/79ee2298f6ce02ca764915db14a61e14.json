{"remainingRequest":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\vue_server_system\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\vue_server_system\\src\\views\\Login.vue","mtime":1684314372380},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGtleTonJywNCiAgICAgIGNhcHRjaGFJbWc6ICcnLA0KICAgICAgbG9naW5Gb3JtOiB7DQogICAgICAgIHVzZXJuYW1lOiAnJywNCiAgICAgICAgcGFzc3dvcmQ6ICcnLA0KICAgICAgICBjb2RlOiAnJywNCiAgICAgICAgdG9rZW46ICcnLA0KICAgICAgICBrZXk6JycsDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6DQogICAgICAgICAgICBbDQogICAgICAgICAgLy/pnZ7nqbrpqozor4ENCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnmbvlvZXnmoTnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgcGFzc3dvcmQ6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnmbvlvZXnmoTlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgY29kZTogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggScsIHRyaWdnZXI6ICdibHVyJ30sDQogICAgICAgICAgLy/lrZfnrKbplb/luqbnmoTpqozor4Hop4TliJkNCiAgICAgICAgICB7bWluOiA1LCBtYXg6IDUsIG1lc3NhZ2U6ICfpqozor4HnoIHplb/luqbkuLogNSDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cid9XQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czoge30sDQogIHByb3BzOiB7fSwNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygn5Yid5aeL5YyWJykNCiAgICB0aGlzLmdldENhcHRjaGEoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgew0KDQogICAgICAvL2Zyb21OYW1l5Y+C5pWw5Lyg6YCS5bCx5pivcmVmPSdsb2dpbkZyb20nIOS9v+eUqHRoaXMuJHJlZnNbZnJvbU5hbWVd6I635b6XIOmhtemdouS4iueahOihqOWNleOAgg0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQoNCiAgICAgICAgLy/lpoLmnpx2YWxpZOS4unRydWXvvIzooajnpLrooajljZXnmoTpqozor4Hop4TliJkg6YCa6L+H44CCDQogICAgICAgIGlmICh2YWxpZCkgew0KDQogICAgICAgICAgLy8gYWxlcnQoJ+ivt+axguacjeWKoeWZqOeZu+W9lScp5bCGanPlr7nosaHovazmjaLkuLrlj4LmlbDlvaLlvI/lrZfnrKbkuLJ1c2VybmFtZT0xMjMkcHdkPTEyMw0KICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9sb2dpbj8nK3RoaXMuJHFzLnN0cmluZ2lmeSh0aGlzLmxvZ2luRm9ybSkpDQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlPT57DQoNCiAgICAgICAgICAgICAgICAvL+iOt+W+l+acjeWKoeWZqOi/lOWbnnRva2Vu77yM5Zyo5ZON5bqU5aS05LitDQogICAgICAgICAgICAgICAgY29uc3Qgand0PXJlc3BvbnNlLmhlYWRlcnNbJ3Rva2VuJ10NCiAgICAgICAgICAgICAgICAvL+S/neWtmGp3dCDosIPnlKhWdWV45Lit55qEbXV0YXRpb25z5Lit55qEU0VUX1RPS0VO5pa55rOV6L+b6KGM5L+d5a2Y44CCDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVE9LRU4nLGp3dCkNCiAgICAgICAgICAgICAgICAvL+i3s+i9rOiHs+mmlumhtQ0KICAgICAgICAgICAgICAgICB0aGlzLiRzZXRTZXNzaW9uU3RvcmFnZSgndXNlcm5hbWUnLHRoaXMubG9naW5Gb3JtLnVzZXJuYW1lKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnmbvpmYbmiJDlip8iKQ0KICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4JykNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKGVycm9yPT57DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgICAgICAgICAgLy/lpoLmnpznmbvlvZXlj5HnlJ/lvILluLjvvIzliLfmlrDpqozor4HnoIENCiAgICAgICAgICAgICAgICB0aGlzLmdldENhcHRjaGEoKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhJyk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q2FwdGNoYSgpew0KICAgICAgLy/nlKhheGlvc+ivt+axguacjeWKoeWZqOiOt+W+l+mqjOivgeeggeaVsOaNrg0KICAgICAgLy9nZXQo6Lev5b6EKSDor7fmsYLmnI3liqHlmagNCiAgICAgIC8vdGhlbiDmnI3liqHlmajlk43lupTmiJDlip/lm57osIPlh73mlbANCg0KICAgICAgdGhpcy4kYXhpb3MuZ2V0KCcvY2FwdGNoYScpDQogICAgICAudGhlbigocmVzcG9uc2UpPT57DQoNCiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkNCiAgICAgICAgdGhpcy5jYXB0Y2hhSW1nPXJlc3BvbnNlLmRhdGEucmVzdWx0ZGF0YS5jYXB0Y2hhSW1nDQogICAgICAgIHRoaXMubG9naW5Gb3JtLmtleT1yZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEua2V5DQogICAgICB9KS5jYXRjaCgoZXJyb3IpPT57DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgfSkNCg0KDQogICAgfQ0KICB9LA0KDQoNCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col :xl=\"6\" :lg=\"7\" :xs=\"24\">\r\n      <h2>欢迎使用万里学院影院APP后台系统</h2>\r\n      <el-image style=\"width: 200px;height: 180px;\" :src=\"require('@/assets/logo.png')\"></el-image>\r\n      <p>万里学院大数据与软件工程专业提供技术支持</p>\r\n      <p>基于java基础实现</p>\r\n    </el-col>\r\n    <el-col :span=\"1\">\r\n      <el-divider direction=\"vertical\"></el-divider>\r\n    </el-col>\r\n    <el-col :xl=\"6\" :lg=\"7\">\r\n      <el-form ref=\"loginForm\" :model=\"loginForm\" label-width=\"80px\" label-position=\"right\" :rules=\"rules\">\r\n        <el-form-item label=\"用户名\" style=\"width: 380px\" prop=\"username\">\r\n          <el-input v-model=\"loginForm.username\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"密码\" style=\"width: 380px\" prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"loginForm.password\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"验证码\" style=\"width: 380px\" prop=\"code\">\r\n          <el-input v-model=\"loginForm.code\" style=\"width: 170px;float: left;\" maxlength=\"5\"></el-input>\r\n          <el-image :src=\"captchaImg\" class=\"captchaImg\" @click=\"getCaptcha\"></el-image>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"$event=>submitForm('loginForm')\">提交</el-button>\r\n          <el-button>获取密码</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      key:'',\r\n      captchaImg: '',\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        code: '',\r\n        token: '',\r\n        key:'',\r\n      },\r\n      rules: {\r\n        username:\r\n            [\r\n          //非空验证\r\n          {required: true, message: '请输入登录的用户名', trigger: 'blur'}],\r\n        password: [{required: true, message: '请输入登录的密码', trigger: 'blur'}],\r\n        code: [{required: true, message: '请输入验证码', trigger: 'blur'},\r\n          //字符长度的验证规则\r\n          {min: 5, max: 5, message: '验证码长度为 5 个字符', trigger: 'blur'}]\r\n      }\r\n    }\r\n  },\r\n  components: {},\r\n  props: {},\r\n  created() {\r\n    console.log('初始化')\r\n    this.getCaptcha()\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n\r\n      //fromName参数传递就是ref='loginFrom' 使用this.$refs[fromName]获得 页面上的表单。\r\n      this.$refs[formName].validate((valid) => {\r\n\r\n        //如果valid为true，表示表单的验证规则 通过。\r\n        if (valid) {\r\n\r\n          // alert('请求服务器登录')将js对象转换为参数形式字符串username=123$pwd=123\r\n          this.$axios.post('/login?'+this.$qs.stringify(this.loginForm))\r\n              .then(response=>{\r\n\r\n                //获得服务器返回token，在响应头中\r\n                const jwt=response.headers['token']\r\n                //保存jwt 调用Vuex中的mutations中的SET_TOKEN方法进行保存。\r\n                this.$store.commit('SET_TOKEN',jwt)\r\n                //跳转至首页\r\n                 this.$setSessionStorage('username',this.loginForm.username)\r\n                console.log(\"登陆成功\")\r\n                 this.$router.push('/index')\r\n              })\r\n              .catch(error=>{\r\n                console.log(error)\r\n                //如果登录发生异常，刷新验证码\r\n                this.getCaptcha()\r\n              })\r\n        } else {\r\n          console.log('error submit!');\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    getCaptcha(){\r\n      //用axios请求服务器获得验证码数据\r\n      //get(路径) 请求服务器\r\n      //then 服务器响应成功回调函数\r\n\r\n      this.$axios.get('/captcha')\r\n      .then((response)=>{\r\n\r\n        console.log(response.data)\r\n        this.captchaImg=response.data.resultdata.captchaImg\r\n        this.loginForm.key=response.data.resultdata.key\r\n      }).catch((error)=>{\r\n        console.log(error)\r\n      })\r\n\r\n\r\n    }\r\n  },\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-row {\r\n  background: #fafafa;\r\n  height: 100%;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  text-align: center;\r\n}\r\n\r\n.el-divider {\r\n  height: 200px;\r\n}\r\n\r\n.captchaImg {\r\n  float: left;\r\n  margin-left: 10px;\r\n  border-radius: 4px;\r\n}\r\n\r\n</style>"]}]}