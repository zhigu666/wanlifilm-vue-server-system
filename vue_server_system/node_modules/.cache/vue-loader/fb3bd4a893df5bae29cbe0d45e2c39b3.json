{"remainingRequest":"D:\\desk\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desk\\vue_server_system\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\desk\\vue_server_system\\src\\views\\Login.vue","mtime":1684828296563},{"path":"D:\\desk\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\desk\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\desk\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\desk\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2FwdGNoYUltZzonJywgIC8v6aqM6K+B56CB5Zu+54mH55qE5pWw5o2uDQogICAgICBsb2dpbkZvcm06IHsNCiAgICAgICAgdXNlcm5hbWU6ICcnLA0KICAgICAgICBwYXNzd29yZDogJycsDQogICAgICAgIGNvZGU6ICcnLCAgIC8v6aqM6K+B56CBICAg5a2YcmVkaXPkuK3nmoR2YWx1ZQ0KICAgICAgICBrZXk6JycgICAgIC8v6ZqP5py656CBICAg5a2YcmVkaXPkuK3nmoRrZXkNCiAgICAgIH0sDQogICAgICAvL+mqjOivgeinhOWImSBydWxlcw0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFsNCiAgICAgICAgICAvL+mdnuepuumqjOivgQ0KICAgICAgICAgIHtyZXF1aXJlZDp0cnVlLG1lc3NhZ2U6J+ivt+i+k+WFpeeZu+W9leeahOeUqOaIt+WQjScsdHJpZ2dlcjonYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHBhc3N3b3JkOiBbDQogICAgICAgICAge3JlcXVpcmVkOnRydWUsbWVzc2FnZTon6K+36L6T5YWl55m75b2V55qE5a+G56CBJyx0cmlnZ2VyOidibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgY29kZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpqozor4HnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICAvL+Wtl+espumVv+W6pueahOmqjOivgeinhOWImQ0KICAgICAgICAgIHttaW46NSxtYXg6NSxtZXNzYWdlOifpqozor4HnoIHplb/luqbkuLogNSDkuKrlrZfnrKYnLHRyaWdnZXI6J2JsdXInfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsgDQogICAgLy9WdWXlrp7kvovnmoTnlJ/lkb3lkajmnJ/mlrnms5XvvIzliJvlu7rlrozmr5UNCiAgICB0aGlzLmdldENhcHRjaGEoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN1Ym1pdEZvcm0gKGZyb21OYW1lKSB7IA0KICAgICAgLy9mcm9tTmFtZeWPguaVsOS8oOmAkuWwseaYr3JlZj0nbG9naW5Gcm9tJyAgIOS9v+eUqHRoaXMuJHJlZnNbZnJvbU5hbWVd6I635b6X6aG16Z2i5LiK55qE6KGo5Y2V44CCDQogICAgICB0aGlzLiRyZWZzW2Zyb21OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsgDQogICAgICAgIC8v5aaC5p6cdmFsaWTkuLp0cnVl77yM6KGo56S66KGo5Y2V55qE6aqM6K+B6KeE5YiZIOmAmui/h+OAgg0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAvL3Bvc3Qo6Lev5b6ELOWPguaVsOWAvCkNCiAgICAgICAgICAvL3RoaXMuJHFzLnN0cmluZ2lmeSggSlPlr7nosaEpICDlsIZqc+Wvueixoei9rOaNouS4uiDlj4LmlbDlvaLlvI/lrZfnrKbkuLLjgIIgdXNlcm5hbWU9YWRtaW4mcGFzc3dvcmQ9MTIzJmtleT0xMjMxMjMmY29kZT01dzNxdw0KICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9sb2dpbj8nK3RoaXMuJHFzLnN0cmluZ2lmeSh0aGlzLmxvZ2luRm9ybSkpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7ICANCiAgICAgICAgICAgICAgICAvL+iOt+W+l+acjeWKoeWZqOi/lOWbnnRva2Vu77yM5Zyo5ZON5bqU5aS05Lit44CCIGp3dA0KICAgICAgICAgICAgICAgIGNvbnN0IGp3dCA9IHJlc3BvbnNlLmhlYWRlcnNbJ3Rva2VuJ10NCiAgICAgICAgICAgICAgICAvL+S/neWtmGp3dCDosIPnlKhWdWV45Lit55qEbXV0YXRpb25z5Lit55qEU0VUX1RPS0VO5pa55rOV6L+b6KGM5L+d5a2Y44CCDQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfVE9LRU4nLCBqd3QpDQogICAgICAgICAgICAgICAgLy/osIPmjaLoh7PpppbpobXjgIIgDQogICAgICAgICAgICAgICAgdGhpcy4kc2V0U2Vzc2lvblN0b3JhZ2UoJ3VzZXJuYW1lJyx0aGlzLmxvZ2luRm9ybS51c2VybmFtZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi55m75b2V5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJykNCiAgICAgICAgICAgICAgICAvL3RoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ0luZGV4JywgcGFyYW1zOiB7IG5hbWU6ICcyMjInIH0gfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aGlzLmdldENhcHRjaGEoKQ0KICAgICAgICB9IGVsc2UgeyAgICANCiAgICAgICAgICB0aGlzLmdldENhcHRjaGEoKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBTdWJtaXQhJyk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy/or7fmsYLmnI3liqHlmajojrflvpfpqozor4HnoIHlm77niYfmlbDmja4NCiAgICBnZXRDYXB0Y2hhICgpIHsgDQogICAgICAvL+S9v+eUqGF4aW9z6K+35rGC5pyN5Yqh5Zmo6I635b6X6aqM6K+B56CB5pWw5o2uOg0KICAgICAgLy9nZXQo6Lev5b6EKSAg6K+35rGC5pyN5Yqh5ZmoDQogICAgICAvL3RoZW4gIOacjeWKoeWZqOWTjeW6lOaIkOWKn+eahOWbnuiwg+WHveaVsC4NCiAgICAgIHRoaXMuJGF4aW9zLmdldCgnL2NhcHRjaGEnKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7IA0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgIHRoaXMuY2FwdGNoYUltZyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0ZGF0YS5jYXB0Y2hhSW1nDQogICAgICAgICAgdGhpcy5sb2dpbkZvcm0ua2V5ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhLmtleQ0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7IA0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSkNCg0KICAgICAgLyoNCiAgICAgICAgIOacjeWKoeWZqOi/lOWbnueahOaVsOaNruagvOW8j++8mg0KICAgICAgICAgcmVzcG9uc2UuZGF0YeWwseaYr+acjeWKoeWZqOi/lOWbnueahOaVsOaNruWvueixoToNCiAgICAgICAgIHsNCiAgICAgICAgICBjb2RlOiAyMDAsIC8vMjAw6K+35rGC5pON5L2c5oiQ5YqfDQogICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKnycsDQogICAgICAgICAgcmVzdWx0ZGF0YToge2tleTrpmo/mnLrnoIEsY2FwdGNoYUltZzrovaznoIHlkI7pqozor4HnoIHlm77niYd9LCAvL2RhdGHlsLHmmK/lhbfkvZPor7fmsYLnmoTmlbDmja4NCiAgICAgICAgfQ0KICAgICAgKi8NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <el-row>\r\n     \r\n      <el-col :xl=\"6\" :lg=\"7\" :xs=\"24\">\r\n        <h2>欢迎使用万里学院影院App后台管理系统</h2>\r\n        <el-image style=\"width:180px; height: 180px; border-radius: 16px;\" :src=\"require('@/assets/logo.jpg')\">\r\n        </el-image>\r\n        <p>万里学院大数据与软件工程专业提供技术支持</p>\r\n        <p>基于SpringBoot技术实现</p>\r\n      </el-col>\r\n      <el-col :span=\"1\">\r\n        <!-- 分割线 -->\r\n        <el-divider direction=\"vertical\"></el-divider>\r\n      </el-col>\r\n      <el-col :xl=\"6\" :lg=\"7\">\r\n        <!-- ref就类似于 html标签 标记所定义id='loginForm' 可用在JS代码中 通过ref获得标签 -->\r\n        <el-form ref=\"loginForm\" :model=\"loginForm\" label-width=\"80px\" label-position=\"right\" :rules=\"rules\">\r\n          <el-form-item label=\"用户名\" style=\"width:380px\" prop=\"username\">\r\n            <el-input v-model=\"loginForm.username\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" style=\"width:380px\" prop=\"password\">\r\n            <el-input type=\"password\" v-model=\"loginForm.password\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"验证码\" style=\"width:380px\" prop=\"code\">\r\n            <el-input  v-model=\"loginForm.code\" style=\"width: 170px; float:left;\" maxlength=\"5\"></el-input>\r\n            <el-image :src=\"captchaImg\" class=\"captchaImg\" @click=\"getCaptcha\"></el-image>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n             <el-button type=\"primary\" @click=\"submitForm('loginForm')\">提交</el-button>\r\n              <el-button >获取密码</el-button>\r\n          </el-form-item>\r\n        </el-form>  \r\n      </el-col>\r\n    </el-row>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      captchaImg:'',  //验证码图片的数据\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        code: '',   //验证码   存redis中的value\r\n        key:''     //随机码   存redis中的key\r\n      },\r\n      //验证规则 rules\r\n      rules: {\r\n        username: [\r\n          //非空验证\r\n          {required:true,message:'请输入登录的用户名',trigger:'blur'}\r\n        ],\r\n        password: [\r\n          {required:true,message:'请输入登录的密码',trigger:'blur'}\r\n        ],\r\n        code: [\r\n          { required: true, message: '请输入验证码', trigger: 'blur' },\r\n          //字符长度的验证规则\r\n          {min:5,max:5,message:'验证码长度为 5 个字符',trigger:'blur'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () { \r\n    //Vue实例的生命周期方法，创建完毕\r\n    this.getCaptcha();\r\n  },\r\n  methods: {\r\n    submitForm (fromName) { \r\n      //fromName参数传递就是ref='loginFrom'   使用this.$refs[fromName]获得页面上的表单。\r\n      this.$refs[fromName].validate((valid) => { \r\n        //如果valid为true，表示表单的验证规则 通过。\r\n        if (valid) {\r\n          //post(路径,参数值)\r\n          //this.$qs.stringify( JS对象)  将js对象转换为 参数形式字符串。 username=admin&password=123&key=123123&code=5w3qw\r\n          this.$axios.post('/login?'+this.$qs.stringify(this.loginForm))\r\n            .then(response => {  \r\n                //获得服务器返回token，在响应头中。 jwt\r\n                const jwt = response.headers['token']\r\n                //保存jwt 调用Vuex中的mutations中的SET_TOKEN方法进行保存。\r\n                this.$store.commit('SET_TOKEN', jwt)\r\n                //调换至首页。 \r\n                this.$setSessionStorage('username',this.loginForm.username)\r\n                console.log(\"登录操作成功\");\r\n                this.$router.push('/home')\r\n                //this.$router.push({ name: 'Index', params: { name: '222' } })\r\n            })\r\n            this.getCaptcha()\r\n        } else {    \r\n          this.getCaptcha()\r\n          console.log('Error Submit!');\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    //请求服务器获得验证码图片数据\r\n    getCaptcha () { \r\n      //使用axios请求服务器获得验证码数据:\r\n      //get(路径)  请求服务器\r\n      //then  服务器响应成功的回调函数.\r\n      this.$axios.get('/captcha')\r\n        .then(response => { \r\n          console.log(response.data);\r\n          this.captchaImg = response.data.resultdata.captchaImg\r\n          this.loginForm.key = response.data.resultdata.key\r\n        }).catch(error => { \r\n          console.log(error);\r\n        })\r\n\r\n      /*\r\n         服务器返回的数据格式：\r\n         response.data就是服务器返回的数据对象:\r\n         {\r\n          code: 200, //200请求操作成功\r\n          message: '操作成功',\r\n          resultdata: {key:随机码,captchaImg:转码后验证码图片}, //data就是具体请求的数据\r\n        }\r\n      */\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-row{\r\n  background: #fafafa;\r\n  height: 100%;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  text-align: center;\r\n}\r\n\r\n.el-divider{\r\n  height: 200px;\r\n}\r\n.captchaImg{\r\n  float:left;\r\n  margin-left:10px;\r\n  border-radius:4px;\r\n}\r\n</style>\r\n"]}]}