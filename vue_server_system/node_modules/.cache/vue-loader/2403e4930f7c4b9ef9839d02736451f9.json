{"remainingRequest":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Roles.vue","mtime":1680671141508},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlbGVjdGlvbjpbXSwNCiAgICAgIHRhYmxlRGF0YTpbXSwNCiAgICAgIGRlbGV0ZUFsbEJ0blN0dTp0cnVlLA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6ZmFsc2UsDQogICAgICBzZWFyY2hGb3JtOnsNCiAgICAgICAgbmFtZTonJywNCiAgICAgIH0sDQoNCiAgICAgIFJvbGVGb3JtOnsNCiAgICAgICAgLy8gbmFtZTonJywNCiAgICAgICAgLy8gY29kZTonJywNCiAgICAgICAgLy8gcmVtYXJrOicnLA0KICAgICAgICAvLyBzdGF0dTowLA0KICAgICAgfSwNCg0KICAgICAgdG90YWw6IDEwLC8v5YiG6aG15pi+56S65oC76K6w5b2V5pWwDQogICAgICBzaXplOiAxMCwvL+WNlemhteiusOW9leaVsA0KICAgICAgY3VycmVudDogMSwvL+W9k+WJjemhteeggQ0KICAgICAgcnVsZXM6ew0KICAgICAgICBuYW1lOlt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibInLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgY29kZTpbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy57yW56CBJywgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIHJlbWFyazpbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5o+P6L+wJywgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgICAgIHN0YXR1Olt7cmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOifor7fovpPlhaXnlKjmiLfnmoTnirbmgIEnLHRyaWdnZXI6J2JsdXInfV0sDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7fSwNCiAgcHJvcHM6IHt9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMubG9hZFJvbGVMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZUNsb3NlKCl7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMucmVzdEZvcm0oJ1JvbGVGb3JtJykNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL3N5c3RlbS9yb2xlLycgKyAodGhpcy5Sb2xlRm9ybS5pZCA/ICd1cGRhdGUnIDogJ3NhdmUnKSwgdGhpcy5Sb2xlRm9ybSkNCiAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tZXNzYWdlLA0KICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICAgICAgZHVyYXRpb246MTUwMCwNCiAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUm9sZUxpc3QoKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0Rm9ybShmb3JtTmFtZSkNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgcmVzdEZvcm0oZm9ybU5hbWUpew0KICAgICAgdGhpcy5Sb2xlRm9ybT17fQ0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKQ0KICAgIH0sDQogICAgLy/liqDovb3pobXpnaLmiYDmnInop5LoibLkv6Hmga8NCiAgICAvL+WmguaenHNlYXJjaGZvcm0ubmFtZeacieWAvO+8jOS7o+ihqOayoeaciei+k+WFpeWGheWuue+8jOm7mOiupOWKoOi9veaJgOacieinkuiJsuS/oeaBrw0KICAgIGxvYWRSb2xlTGlzdCgpew0KICAgICAgdGhpcy4kYXhpb3MuZ2V0KCcvc3lzdGVtL3JvbGUvbGlzdCcpLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgdGhpcy50YWJsZURhdGE9cmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhLnJlY29yZHMNCiAgICAgICAgdGhpcy50b3RhbD1yZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEudG90YWwNCiAgICAgICAgdGhpcy5zaXplPXJlc3BvbnNlLmRhdGEucmVzdWx0ZGF0YS5zaXplDQogICAgICAgIHRoaXMuY3VycmVudD1yZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEuY3VycmVudA0KICAgICAgfSkNCiAgICB9LA0KDQogICAgc2VsZWN0aW9uQ2hhbmdlKHZhbHVlKSB7DQogICAgICB0aGlzLnNlbGVjdGlvbiA9IHZhbHVlOw0KICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uKSB7DQogICAgICAgIC8v5aaC5p6c5pWw5o2u5Lit5pyJ5pWw5o2u77yM5Luj6KGo5pyJ6YCJ5Lit55qE55So5oi377yM5bCx5L+u5pS55om56YeP5Yig6Zmk5Li65Y+v55SoDQogICAgICAgIHRoaXMuZGVsZXRlQWxsQnRuU3R1ID0gKHRoaXMuc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGVkaXRSb2xlKGlkKXsNCiAgICAgIHRoaXMuJGF4aW9zKCcvcm9sZS9yb2xlaW5mby8nICsgaWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLlJvbGVGb3JtID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRkYXRhIC8v5bCG5pyN5Yqh5Zmo6L+U5Zue55qE55So5oi35pWw5o2u6LWL5YC857uZUm9sZUZvcm0NCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVSb2xlKGlkKXsNCiAgICAgIGxldCBpZHMgPSBbXTsvL+imgeWIoOmZpOeahOS4gOe7hOaVsOaNrueahGlkDQogICAgICBpZCA/IGlkcy5wdXNoKGlkKSA6IHRoaXMuc2VsZWN0aW9uLmZvckVhY2godSA9PiB7DQogICAgICAgIGlkcy5wdXNoKHUuaWQpDQogICAgICB9KQ0KDQogICAgICBjb25zb2xlLmxvZyhpZHMpDQoNCiAgICAgIC8vaWRz5piv6KaB5Yig6Zmk55qEaWQNCiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9zeXN0ZW0vcm9sZS9kZWxldGUnLCBpZHMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UsDQogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxvYWRSb2xlTGlzdCgpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9DQogIH0NCg0KDQp9DQo="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"Roles.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n  <div>\r\n    <el-form ref=\"form\" :model=\"searchForm\"  :inline=\"true\">\r\n      <el-form-item>\r\n        <el-input v-model=\"searchForm.name\" placeholder=\"请输入要搜索的角色名\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button @click=\"loadRoleList\">搜索</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible=true\">新建</el-button>\r\n        <el-popconfirm title=\"确认要批量删除角色信息吗？\" @confirm=\"deleteRole\">\r\n          <el-button slot=\"reference\" type=\"danger\" :disabled=\"deleteAllBtnStu\">批量删除</el-button>\r\n        </el-popconfirm>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n<!--    显示角色数据-->\r\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%; margin-bottom:20px;\"\r\n              :cell-style=\"{padding:'2px'}\" @selection-change=\"selectionChange\">\r\n      <el-table-column type=\"selection\" width=\"50\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色名\" width=\"200\" prop=\"name\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"角色编码\" width=\"150\" prop=\"code\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"描述\" width=\"500\" prop=\"remark\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"状态\" width=\"70\" prop=\"statu\">\r\n        <template slot-scope=\"scope\">\r\n          <!--        <el-tag size=\"mini\" type=\"success\">正常</el-tag>-->\r\n          <el-tag size=\"mini\" v-if=\"scope.row.statu===1\" type=\"success\">正常</el-tag>\r\n          <el-tag size=\"mini\" v-else-if=\"scope.row.statu===0\" type=\"danger\">禁用</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\">分配权限</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <el-button type=\"text\" @click=\"editRole(scope.row.id)\">编辑</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n\r\n\r\n          <el-popconfirm title=\"确认要删除该角色信息吗？\" @confirm=\"deleteRole(scope.row.id)\">\r\n            <el-button slot=\"reference\" type=\"text\">删除</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n    </el-table>\r\n\r\n\r\n    <!--分页页码-->\r\n    <el-pagination layout=\"total,sizes,prev, pager, next,jumper\" :total=\"total\" :page-size=\"size\"\r\n                   :page-sizes=\"[5,10,15,20,25]\" :current-page=\"current\">\r\n    </el-pagination>\r\n\r\n    <!--    新建用户和编辑用户的对话框-->\r\n    <el-dialog title=\"用户信息\" :visible.sync=\"dialogFormVisible\" width=\"600px\" :before-close=\"handleClose\">\r\n      <el-form :model=\"RoleForm\" ref=\"RoleForm\" label-width=\"100px\" :rules=\"rules\">\r\n        <el-form-item label=\"角色名\" label-width=\"100px\" prop=\"name\">\r\n          <el-input v-model=\"RoleForm.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色编码\" label-width=\"100px\" prop=\"code\">\r\n          <el-input v-model=\"RoleForm.code\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" label-width=\"100px\" prop=\"remark\">\r\n          <el-input v-model=\"RoleForm.remark\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\" label-width=\"100px\" prop=\"statu\">\r\n          <el-radio-group v-model=\"RoleForm.statu\">\r\n            <el-radio :label=\"0\">禁用</el-radio>\r\n            <el-radio :label=\"1\">正常</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('RoleForm')\">保存用户</el-button>\r\n          <el-button @click=\"restForm('RoleForm')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      selection:[],\r\n      tableData:[],\r\n      deleteAllBtnStu:true,\r\n      dialogFormVisible:false,\r\n      searchForm:{\r\n        name:'',\r\n      },\r\n\r\n      RoleForm:{\r\n        // name:'',\r\n        // code:'',\r\n        // remark:'',\r\n        // statu:0,\r\n      },\r\n\r\n      total: 10,//分页显示总记录数\r\n      size: 10,//单页记录数\r\n      current: 1,//当前页码\r\n      rules:{\r\n        name:[{required: true, message: '请输入角色', trigger: 'blur'}],\r\n        code:[{required: true, message: '请输入角色编码', trigger: 'blur'}],\r\n        remark:[{required: true, message: '请输入描述', trigger: 'blur'}],\r\n        statu:[{required:true,message:'请输入用户的状态',trigger:'blur'}],\r\n      }\r\n    }\r\n  },\r\n  components: {},\r\n  props: {},\r\n  created() {\r\n    this.loadRoleList()\r\n  },\r\n  methods: {\r\n    handleClose(){\r\n      this.dialogFormVisible = false\r\n      this.restForm('RoleForm')\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.$axios.post('/system/role/' + (this.RoleForm.id ? 'update' : 'save'), this.RoleForm)\r\n              .then(response => {\r\n                this.$message({\r\n                  message: response.data.message,\r\n                  type: \"success\",\r\n                  duration:1500,\r\n                  onClose: () => {\r\n                    this.loadRoleList()\r\n                    this.dialogFormVisible = false\r\n                    this.restForm(formName)\r\n                  }\r\n                })\r\n              })\r\n        }\r\n      })\r\n    },\r\n    restForm(formName){\r\n      this.RoleForm={}\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    //加载页面所有角色信息\r\n    //如果searchform.name有值，代表没有输入内容，默认加载所有角色信息\r\n    loadRoleList(){\r\n      this.$axios.get('/system/role/list').then(response=>{\r\n        this.tableData=response.data.resultdata.records\r\n        this.total=response.data.resultdata.total\r\n        this.size=response.data.resultdata.size\r\n        this.current=response.data.resultdata.current\r\n      })\r\n    },\r\n\r\n    selectionChange(value) {\r\n      this.selection = value;\r\n      if (this.selection) {\r\n        //如果数据中有数据，代表有选中的用户，就修改批量删除为可用\r\n        this.deleteAllBtnStu = (this.selection.length === 0)\r\n      }\r\n    },\r\n    editRole(id){\r\n      this.$axios('/role/roleinfo/' + id).then(response => {\r\n        this.RoleForm = response.data.resultdata //将服务器返回的用户数据赋值给RoleForm\r\n        this.dialogFormVisible = true\r\n      })\r\n    },\r\n    deleteRole(id){\r\n      let ids = [];//要删除的一组数据的id\r\n      id ? ids.push(id) : this.selection.forEach(u => {\r\n        ids.push(u.id)\r\n      })\r\n\r\n      console.log(ids)\r\n\r\n      //ids是要删除的id\r\n      this.$axios.post('/system/role/delete', ids).then(response => {\r\n        this.$message({\r\n          message: response.data.message,\r\n          type: \"success\",\r\n          showClose: true,\r\n          onClose: () => {\r\n            this.loadRoleList()\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}