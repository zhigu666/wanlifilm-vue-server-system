{"remainingRequest":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue_workspace\\vue_server_system\\src\\views\\system\\Category.vue","mtime":1680679044774},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue_workspace\\vue_server_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNlbGVjdGlvbjpbXSwNCiAgICAgIHRvdGFsOiAxMCwvL+WIhumhteaYvuekuuaAu+iusOW9leaVsA0KICAgICAgc2l6ZTogMTAsLy/ljZXpobXorrDlvZXmlbANCiAgICAgIGN1cnJlbnQ6IDEsLy/lvZPliY3pobXnoIENCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICBzZWFyY2hGb3JtOiB7DQogICAgICAgIGNhdGVnb3J5TmFtZTogJycsDQogICAgICB9LA0KICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLA0KICAgICAgZGVsZXRlQWxsQnRuU3R1OiB0cnVlLA0KICAgICAgQ2F0ZWdvcnlGb3JtOnsNCg0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnsbvliKvlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cid9XSwNCiAgICAgICAgc3RhdHU6W3tyZXF1aXJlZDp0cnVlLG1lc3NhZ2U6J+ivt+i+k+WFpeexu+WIq+eahOeKtuaAgScsdHJpZ2dlcjonYmx1cid9XSwNCiAgICAgIH0sDQogICAgICBoZWFkZXJzOiB7DQogICAgICAgIC8vIHRva2VuOnRoaXMuJGdldFNlc3Npb25TdG9yYWdlKCd0b2tlbicpDQogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgfSwNCiAgICB9DQogIH0sDQoNCiAgZmlsdGVyczogew0KICAgIGZtdERhdGU6ICh2YWx1ZSkgPT4gew0KICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSkNCiAgICAgIGxldCB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICBsZXQgTSA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykNCiAgICAgIGxldCBkID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpDQoNCiAgICAgIGxldCBoID0gZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKQ0KICAgICAgbGV0IG0gPSBkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykNCiAgICAgIGxldCBzID0gZGF0ZS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpDQoNCiAgICAgIHJldHVybiBgJHt5feW5tCR7TX3mnIgke2R95pelICR7aH06JHttfToke3N9YA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmxvYWRDYXRlZ29yeUxpc3QoKQ0KICB9LA0KICBjb21wb25lbnRzOiB7fSwNCiAgcHJvcHM6IHt9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ2xvc2UoKXsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5yZXN0Rm9ybSgnQ2F0ZWdvcnlGb3JtJykNCiAgICB9LA0KICAgIGxvYWRDYXRlZ29yeUxpc3QoKXsNCiAgICAgIHRoaXMuJGF4aW9zLmdldCgnL3N5c3RlbS9jYXRlZ29yeS9saXN0JykudGhlbihyZXNwb25zZT0+ew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0ZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlc3RGb3JtKGZvcm1OYW1lKXsNCiAgICAgIHRoaXMuQ2F0ZWdvcnlGb3JtPXt9DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpDQogICAgfSwNCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKXsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkPT57DQogICAgICAgIGlmICh2YWxpZCl7DQogICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL3N5c3RlbS9jYXRlZ29yeS8nICsgKHRoaXMuQ2F0ZWdvcnlGb3JtLmlkID8gJ3VwZGF0ZScgOiAnc2F2ZScpLCB0aGlzLkNhdGVnb3J5Rm9ybSkNCiAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2U9PnsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSwNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEyMDAsDQogICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENhdGVnb3J5TGlzdCgpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RGb3JtKGZvcm1OYW1lKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlc3BvbnNlLCBmaWxlKSB7DQogICAgICAvL+S9v+eUqOS4iuS8oOaOp+S7tuS4iuS8oOWktOWDj+aIkOWKnyzmnI3liqHlmajov5Tlm57kuIDkuKrlm77niYfkuIrkvKDlkI7nmoTlnLDlnYANCiAgICAgIHRoaXMuQ2F0ZWdvcnlGb3JtLnVybCA9IHJlc3BvbnNlLmRhdGENCiAgICB9LA0KICAgIHNlYXJjaENhdGVnb3J5SW5mbygpIHsNCg0KICAgIH0sDQogICAgZGVsZXRlQ2F0ZWdvcnkoaWQpIHsNCiAgICAgIGxldCBpZHMgPSBbXTsvL+imgeWIoOmZpOeahOS4gOe7hOaVsOaNrueahGlkDQogICAgICBpZCA/IGlkcy5wdXNoKGlkKSA6IHRoaXMuc2VsZWN0aW9uLmZvckVhY2godSA9PiB7DQogICAgICAgIGlkcy5wdXNoKHUuaWQpDQogICAgICB9KQ0KICAgICAgY29uc29sZS5sb2coaWRzKQ0KICAgICAgLy9pZHPmmK/opoHliKDpmaTnmoRpZA0KICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL3N5c3RlbS9jYXRlZ29yeS9kZWxldGUnLCBpZHMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UsDQogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgIGR1cmF0aW9uOjEyMDAsDQogICAgICAgICAgb25DbG9zZTogKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcnlMaXN0KCkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgc2VsZWN0aW9uQ2hhbmdlKHZhbHVlKSB7Ly92YWx1ZeS4uumAieS4reeahOWvueixoQ0KICAgICAgdGhpcy5zZWxlY3Rpb24gPSB2YWx1ZTsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGlvbikgew0KICAgICAgICAvL+WmguaenOaVsOaNruS4reacieaVsOaNru+8jOS7o+ihqOaciemAieS4reeahOeUqOaIt++8jOWwseS/ruaUueaJuemHj+WIoOmZpOS4uuWPr+eUqA0KICAgICAgICB0aGlzLmRlbGV0ZUFsbEJ0blN0dSA9ICh0aGlzLnNlbGVjdGlvbi5sZW5ndGggPT09IDApDQogICAgICB9DQogICAgfSwNCiAgICBlZGl0Q2F0ZWdvcnkoaWQpew0KICAgICAgdGhpcy4kYXhpb3MoJy9jYXRlZ29yeS9jYXRlZ29yeUluZm8vJyArIGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5DYXRlZ29yeUZvcm0gPSByZXNwb25zZS5kYXRhLnJlc3VsdGRhdGEgLy/lsIbmnI3liqHlmajov5Tlm57nmoTnlKjmiLfmlbDmja7otYvlgLznu5lDYXRlZ29yeWZvcm0NCiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgfQ0KDQoNCn0NCg=="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"Category.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n  <div>\r\n\r\n\r\n    <el-form ref=\"form\" :model=\"searchForm\" label-width=\"80px\" :inline=\"true\">\r\n      <el-form-item>\r\n        <el-input v-model=\"searchForm.categoryName\" placeholder=\"请输入要搜索的类别名\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button @click=\"searchCategoryInfo\">搜索</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible=true\">新建</el-button>\r\n        <el-popconfirm title=\"确认要批量删除类别信息吗？\" @confirm=\"deleteCategory\">\r\n          <el-button slot=\"reference\" type=\"danger\" :disabled=\"deleteAllBtnStu\">批量删除</el-button>\r\n        </el-popconfirm>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!--      类别信息表格  data显示的数据-->\r\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%; margin-bottom:20px;\"\r\n              :cell-style=\"{padding:'2px'}\" @selection-change=\"selectionChange\">\r\n      <el-table-column type=\"selection\" width=\"50\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"分类名称\" width=\"150\" prop=\"name\">\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"类型图标\" width=\"200\">\r\n\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"block\">\r\n            <el-image\r\n                style=\"width: 100px\"\r\n                :src=\"scope.row.url\"\r\n                fit=\"contain\"></el-image>\r\n          </div>\r\n          <!--          <el-avatar size=\"big\" :src=\"scope.row.url\"></el-avatar>-->\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"创建时间\" width=\"250\" prop=\"created\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.created | fmtDate}}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"修改时间\" width=\"250\" prop=\"updated\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.updated | fmtDate}}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" @click=\"editCategory(scope.row.id)\">编辑</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n\r\n          <el-popconfirm title=\"确认要删除该用户信息吗？\" @confirm=\"deleteCategory(scope.row.id)\">\r\n            <el-button slot=\"reference\" type=\"text\">删除</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页页码-->\r\n    <el-pagination layout=\"total,sizes,prev, pager, next,jumper\" :total=\"total\" :page-size=\"size\"\r\n                   :page-sizes=\"[5,10,15,20,25]\" :current-page=\"current\">\r\n    </el-pagination>\r\n\r\n    <!--    新建类别和编辑类别的对话框-->\r\n    <el-dialog title=\"用户信息\" :visible.sync=\"dialogFormVisible\" width=\"600px\" :before-close=\"handleClose\">\r\n      <el-form :model=\"CategoryForm\" ref=\"CategoryForm\" label-width=\"100px\" :rules=\"rules\">\r\n        <el-form-item label=\"分类名称\" label-width=\"100px\" prop=\"name\">\r\n          <el-input v-model=\"CategoryForm.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"分类图标\" label-width=\"100px\">\r\n          <el-upload class=\"avatar-uploader\"\r\n                     action=\"/api/uploader\"\r\n                     :show-file-list=\"false\"\r\n                     :on-success=\"handleAvatarSuccess\"\r\n                     :headers=\"headers\">\r\n            <img v-if=\"CategoryForm.url\" :src=\"CategoryForm.url\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"状态\" label-width=\"100px\" prop=\"statu\">\r\n          <el-radio-group v-model=\"CategoryForm.statu\">\r\n            <el-radio :label=\"0\">禁用</el-radio>\r\n            <el-radio :label=\"1\">正常</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('CategoryForm')\">保存用户</el-button>\r\n          <el-button @click=\"restForm('CategoryForm')\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      selection:[],\r\n      total: 10,//分页显示总记录数\r\n      size: 10,//单页记录数\r\n      current: 1,//当前页码\r\n      tableData: [],\r\n      searchForm: {\r\n        categoryName: '',\r\n      },\r\n      dialogFormVisible: false,\r\n      deleteAllBtnStu: true,\r\n      CategoryForm:{\r\n\r\n      },\r\n      rules: {\r\n        name: [{required: true, message: '请输入类别名称', trigger: 'blur'}],\r\n        statu:[{required:true,message:'请输入类别的状态',trigger:'blur'}],\r\n      },\r\n      headers: {\r\n        // token:this.$getSessionStorage('token')\r\n        token: localStorage.getItem('token')\r\n      },\r\n    }\r\n  },\r\n\r\n  filters: {\r\n    fmtDate: (value) => {\r\n      let date = new Date(value)\r\n      let y = date.getFullYear()\r\n      let M = (date.getMonth() + 1).toString().padStart(2, '0')\r\n      let d = date.getDate().toString().padStart(2, '0')\r\n\r\n      let h = date.getHours().toString().padStart(2, '0')\r\n      let m = date.getMinutes().toString().padStart(2, '0')\r\n      let s = date.getSeconds().toString().padStart(2, '0')\r\n\r\n      return `${y}年${M}月${d}日 ${h}:${m}:${s}`\r\n    }\r\n  },\r\n  created() {\r\n    this.loadCategoryList()\r\n  },\r\n  components: {},\r\n  props: {},\r\n  methods: {\r\n    handleClose(){\r\n      this.dialogFormVisible = false\r\n      this.restForm('CategoryForm')\r\n    },\r\n    loadCategoryList(){\r\n      this.$axios.get('/system/category/list').then(response=>{\r\n        this.tableData = response.data.resultdata\r\n      })\r\n    },\r\n    restForm(formName){\r\n      this.CategoryForm={}\r\n      this.$refs[formName].resetFields()\r\n    },\r\n    submitForm(formName){\r\n      this.$refs[formName].validate(valid=>{\r\n        if (valid){\r\n          this.$axios.post('/system/category/' + (this.CategoryForm.id ? 'update' : 'save'), this.CategoryForm)\r\n              .then(response=>{\r\n                this.$message({\r\n                  message: response.data.message,\r\n                  type: \"success\",\r\n                  duration:1200,\r\n                  onClose: () => {\r\n                    this.loadCategoryList()\r\n                    this.dialogFormVisible = false\r\n                    this.restForm(formName)\r\n                  }\r\n                })\r\n              })\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(response, file) {\r\n      //使用上传控件上传头像成功,服务器返回一个图片上传后的地址\r\n      this.CategoryForm.url = response.data\r\n    },\r\n    searchCategoryInfo() {\r\n\r\n    },\r\n    deleteCategory(id) {\r\n      let ids = [];//要删除的一组数据的id\r\n      id ? ids.push(id) : this.selection.forEach(u => {\r\n        ids.push(u.id)\r\n      })\r\n      console.log(ids)\r\n      //ids是要删除的id\r\n      this.$axios.post('/system/category/delete', ids).then(response => {\r\n        this.$message({\r\n          message: response.data.message,\r\n          type: \"success\",\r\n          duration:1200,\r\n          onClose: () => {\r\n            this.loadCategoryList()\r\n          }\r\n        })\r\n      })\r\n    },\r\n    selectionChange(value) {//value为选中的对象\r\n      this.selection = value;\r\n      if (this.selection) {\r\n        //如果数据中有数据，代表有选中的用户，就修改批量删除为可用\r\n        this.deleteAllBtnStu = (this.selection.length === 0)\r\n      }\r\n    },\r\n    editCategory(id){\r\n      this.$axios('/category/categoryInfo/' + id).then(response => {\r\n        this.CategoryForm = response.data.resultdata //将服务器返回的用户数据赋值给Categoryform\r\n        this.dialogFormVisible = true\r\n      })\r\n    },\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/*<!--上传用户头像控件样式-->*/\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>"]}]}